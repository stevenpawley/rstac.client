% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/write.R
\name{write_stac}
\alias{write_stac}
\title{Write a STAC Catalog Structure to Disk}
\usage{
write_stac(
  catalog,
  path,
  catalog_type = c("self-contained", "relative", "absolute"),
  overwrite = FALSE,
  pretty = TRUE,
  base_url = NULL
)
}
\arguments{
\item{catalog}{A STAC Catalog or Collection object created with \code{stac_catalog()}
or \code{stac_collection()}.}

\item{path}{(character, required) Root directory path where the catalog should
be written. Will be created if it doesn't exist.}

\item{catalog_type}{(character, optional) Type of catalog to create. One of:
\itemize{
\item \code{"self-contained"}: All links use relative paths within the catalog structure.
Best for portability and publishing.
\item \code{"relative"}: Links use relative paths but may reference external resources.
\item \code{"absolute"}: All links use absolute URLs. Best for web-served catalogs.
Default is \code{"self-contained"}.
}}

\item{overwrite}{(logical, optional) If \code{TRUE}, overwrites existing files. If
\code{FALSE}, throws an error if files already exist. Default is \code{FALSE}.}

\item{pretty}{(logical, optional) If \code{TRUE}, writes formatted JSON with
indentation. If \code{FALSE}, writes compact JSON. Default is \code{TRUE}.}

\item{base_url}{(character, optional) Base URL for absolute links when
\code{catalog_type = "absolute"}. For example, \code{"https://example.com/stac"}.
Required when using absolute catalog type.}
}
\value{
Invisibly returns the path where the catalog was written.
}
\description{
Writes a complete STAC Catalog structure to the filesystem, including all
child catalogs, collections, and items. This function recursively writes the
entire catalog tree, creating the necessary directory structure and JSON files.
Children and items are automatically retrieved from the catalog's stored objects.
}
\details{
\subsection{Catalog Types}{

\strong{Self-Contained Catalogs:}
All links use relative paths and all referenced resources are within the
catalog directory structure. This is the most portable option and recommended
for sharing or archiving catalogs.

\strong{Relative Catalogs:}
Links use relative paths but may reference resources outside the catalog tree.
Useful when integrating with existing file structures.

\strong{Absolute Catalogs:}
All links use absolute URLs. Required when the catalog will be served from a
web server. Requires \code{base_url} to be specified.
}

\subsection{Directory Structure}{

The function creates a directory structure based on the catalog hierarchy:

\if{html}{\out{<div class="sourceCode">}}\preformatted{path/
  catalog.json                    # Root catalog
  collection1/
    collection.json               # Collection
    items/
      item1.json                  # Items
      item2.json
  collection2/
    collection.json
    subcatalog/
      catalog.json
}\if{html}{\out{</div>}}
}

\subsection{Automatic Object Retrieval}{

When you use \code{add_child()} or \code{add_item()}, the child catalogs and items are
automatically stored as attributes on the parent catalog. The \code{write_stac()}
function retrieves these stored objects and writes them recursively.
}
}
\examples{
\dontrun{
# Create a catalog structure
catalog <- stac_catalog(
  id = "my-catalog",
  description = "Example STAC catalog"
)

collection <- stac_collection(
  id = "landsat-8",
  description = "Landsat 8 imagery",
  license = "CC0-1.0",
  extent = stac_extent(
    spatial_bbox = list(c(-180, -90, 180, 90)),
    temporal_interval = list(c("2013-04-11T00:00:00Z", NULL))
  )
)

item <- stac_item(
  id = "LC08_001",
  geometry = my_geometry,
  bbox = my_bbox,
  datetime = "2023-01-01T00:00:00Z"
)

# Add item to collection (automatically stored)
collection <- add_item(collection, item)

# Add collection to catalog (automatically stored)
catalog <- add_child(catalog, collection)

# Write entire structure - children and items are automatically written!
write_stac(catalog, "output/stac")

# Write as absolute catalog for web serving
write_stac(
  catalog, 
  "output/stac",
  catalog_type = "absolute",
  base_url = "https://example.com/stac"
)

# Overwrite existing catalog
write_stac(catalog, "output/stac", overwrite = TRUE)
}

}
\seealso{
\itemize{
\item \code{\link[=write_catalog]{write_catalog()}} for writing a single catalog/collection file
\item \code{\link[=write_item]{write_item()}} for writing a single item file
\item \code{\link[=read_stac]{read_stac()}} for reading STAC catalogs from disk
\item \code{\link[=add_child]{add_child()}} for adding child catalogs with automatic storage
\item \code{\link[=add_item]{add_item()}} for adding items with automatic storage
}
}
